#!/usr/bin/env bash

if [[ -z $(which openssl) ]]; then
    echo "Not found openssl."
    exit 1
fi

SERVER_HOST=$1
SERVER_PORT=${2:-443}
if [[ -z $SERVER_HOST || -z $SERVER_PORT ]]; then
    echo "Usage: $0 {server_host} {server_port:443}"
    exit 1
fi

echo "QUIT" | openssl s_client -connect "$SERVER_HOST:$SERVER_PORT" 2>&1 | openssl x509 -inform PEM -text

